{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport moment from 'moment/moment';\nvar perfix = 'cache';\nvar expiryInMinutes = 5;\nvar store = function () {\n  var _ref = _asyncToGenerator(function* (key, value) {\n    try {\n      var item = {\n        value: value,\n        timestamp: Date.now()\n      };\n      yield AsyncStorage.setItem(perfix + key, JSON.stringify(item));\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  return function store(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar isExpired = function isExpired(item) {\n  var now = moment(Date.now());\n  var storedTime = moment(item.timestamp);\n  return now.diff(storedTime, 'minutes') > expiryInMinutes;\n};\nvar get = function () {\n  var _ref2 = _asyncToGenerator(function* (key) {\n    try {\n      var value = yield AsyncStorage.getItem(perfix + key);\n      var item = JSON.parse(value);\n      if (!item) return null;\n      if (isExpired(item)) {\n        yield AsyncStorage.removeItem(perfix + key);\n        return null;\n      }\n      return item.value;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  return function get(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport default {\n  store: store,\n  get: get\n};","map":{"version":3,"names":["AsyncStorage","moment","perfix","expiryInMinutes","store","key","value","item","timestamp","Date","now","setItem","JSON","stringify","error","console","log","isExpired","storedTime","diff","get","getItem","parse","removeItem"],"sources":["D:/coues-React Native/Tools2Go/app/utility/cache.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport moment from 'moment/moment';\r\n\r\nconst perfix = 'cache';\r\nconst expiryInMinutes = 5;\r\n\r\nconst store = async (key, value) => {\r\n       try {\r\n              const item ={\r\n                     value,\r\n                     timestamp: Date.now(),\r\n\r\n              }\r\n              await AsyncStorage.setItem(perfix + key, JSON.stringify(item));\r\n       } catch (error) {\r\n              console.log(error);\r\n       }\r\n}\r\n\r\nconst isExpired = (item) => {\r\n       const now = moment(Date.now());\r\n       const storedTime = moment(item.timestamp);\r\n       return now.diff(storedTime, 'minutes') > expiryInMinutes;\r\n}\r\n\r\n\r\n\r\nconst get = async (key) => {\r\n       try {\r\n              const value = await AsyncStorage.getItem(perfix + key);\r\n              const item = JSON.parse(value);\r\n              if(!item) return null;\r\n\r\n            \r\n              if(isExpired(item)) {\r\n                     await AsyncStorage.removeItem(perfix + key);\r\n                     return null;\r\n              }\r\n\r\n              return item.value;\r\n       } catch (error) {\r\n              console.log(error);\r\n       }\r\n}\r\n\r\nexport default {\r\n       store,\r\n       get,\r\n}"],"mappings":";AAAA,OAAOA,YAAY,MAAM,2CAA2C;AACpE,OAAOC,MAAM,MAAM,eAAe;AAElC,IAAMC,MAAM,GAAG,OAAO;AACtB,IAAMC,eAAe,GAAG,CAAC;AAEzB,IAAMC,KAAK;EAAA,6BAAG,WAAOC,GAAG,EAAEC,KAAK,EAAK;IAC7B,IAAI;MACG,IAAMC,IAAI,GAAE;QACLD,KAAK,EAALA,KAAK;QACLE,SAAS,EAAEC,IAAI,CAACC,GAAG;MAE1B,CAAC;MACD,MAAMV,YAAY,CAACW,OAAO,CAACT,MAAM,GAAGG,GAAG,EAAEO,IAAI,CAACC,SAAS,CAACN,IAAI,CAAC,CAAC;IACrE,CAAC,CAAC,OAAOO,KAAK,EAAE;MACTC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACzB;EACP,CAAC;EAAA,gBAXKV,KAAK;IAAA;EAAA;AAAA,GAWV;AAED,IAAMa,SAAS,GAAG,SAAZA,SAAS,CAAIV,IAAI,EAAK;EACrB,IAAMG,GAAG,GAAGT,MAAM,CAACQ,IAAI,CAACC,GAAG,EAAE,CAAC;EAC9B,IAAMQ,UAAU,GAAGjB,MAAM,CAACM,IAAI,CAACC,SAAS,CAAC;EACzC,OAAOE,GAAG,CAACS,IAAI,CAACD,UAAU,EAAE,SAAS,CAAC,GAAGf,eAAe;AAC/D,CAAC;AAID,IAAMiB,GAAG;EAAA,8BAAG,WAAOf,GAAG,EAAK;IACpB,IAAI;MACG,IAAMC,KAAK,SAASN,YAAY,CAACqB,OAAO,CAACnB,MAAM,GAAGG,GAAG,CAAC;MACtD,IAAME,IAAI,GAAGK,IAAI,CAACU,KAAK,CAAChB,KAAK,CAAC;MAC9B,IAAG,CAACC,IAAI,EAAE,OAAO,IAAI;MAGrB,IAAGU,SAAS,CAACV,IAAI,CAAC,EAAE;QACb,MAAMP,YAAY,CAACuB,UAAU,CAACrB,MAAM,GAAGG,GAAG,CAAC;QAC3C,OAAO,IAAI;MAClB;MAEA,OAAOE,IAAI,CAACD,KAAK;IACxB,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACTC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACzB;EACP,CAAC;EAAA,gBAhBKM,GAAG;IAAA;EAAA;AAAA,GAgBR;AAED,eAAe;EACRhB,KAAK,EAALA,KAAK;EACLgB,GAAG,EAAHA;AACP,CAAC"},"metadata":{},"sourceType":"module"}