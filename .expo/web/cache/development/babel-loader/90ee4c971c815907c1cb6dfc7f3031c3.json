{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { create } from \"apisauce\";\nimport cache from \"../utility/cache\";\nimport authStorage from \"../auth/storage\";\nvar apiClient = create({\n  baseURL: \"http://34.216.220.241:9000/api\",\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n});\napiClient.addAsyncRequestTransform(function () {\n  var _ref = _asyncToGenerator(function* (request) {\n    var authToken = yield authStorage.getToken();\n    if (!authToken) return;\n    request.headers['x-auth-token'] = authToken;\n  });\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\nvar get = apiClient.get;\napiClient.get = function () {\n  var _ref2 = _asyncToGenerator(function* (url, params, axiosConfig) {\n    var response = yield get(url, params, axiosConfig);\n    if (response.ok) {\n      cache.store(url, response.data);\n      return response;\n    }\n    var data = yield cache.get(url);\n    return data ? {\n      ok: true,\n      data: data\n    } : response;\n  });\n  return function (_x2, _x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport default apiClient;","map":{"version":3,"names":["create","cache","authStorage","apiClient","baseURL","headers","Accept","addAsyncRequestTransform","request","authToken","getToken","get","url","params","axiosConfig","response","ok","store","data"],"sources":["D:/coues-React Native/Tools2Go/app/api/client.js"],"sourcesContent":["import { create } from \"apisauce\";\r\nimport cache from \"../utility/cache\";\r\nimport authStorage from \"../auth/storage\";\r\n\r\nconst apiClient = create({\r\n       baseURL: \"http://34.216.220.241:9000/api\",\r\n       headers: {\r\n              Accept: 'application/json',\r\n              'Content-Type': 'application/json'\r\n            }\r\n});\r\n\r\napiClient.addAsyncRequestTransform(async request => {\r\n       const authToken = await authStorage.getToken();\r\n       if(!authToken) return;\r\n       request.headers['x-auth-token'] = authToken;\r\n\r\n});\r\n\r\nconst get = apiClient.get;\r\napiClient.get = async (url, params, axiosConfig) => {\r\n       const response = await get(url, params, axiosConfig);\r\n       if(response.ok) {\r\n              cache.store(url, response.data);\r\n              return response;\r\n       }\r\n       const data = await cache.get(url);\r\n       return data ? { ok: true, data } : response;\r\n}\r\n\r\n\r\nexport default apiClient;\r\n"],"mappings":";AAAA,SAASA,MAAM,QAAQ,UAAU;AACjC,OAAOC,KAAK;AACZ,OAAOC,WAAW;AAElB,IAAMC,SAAS,GAAGH,MAAM,CAAC;EAClBI,OAAO,EAAE,gCAAgC;EACzCC,OAAO,EAAE;IACFC,MAAM,EAAE,kBAAkB;IAC1B,cAAc,EAAE;EAClB;AACZ,CAAC,CAAC;AAEFH,SAAS,CAACI,wBAAwB;EAAA,6BAAC,WAAMC,OAAO,EAAI;IAC7C,IAAMC,SAAS,SAASP,WAAW,CAACQ,QAAQ,EAAE;IAC9C,IAAG,CAACD,SAAS,EAAE;IACfD,OAAO,CAACH,OAAO,CAAC,cAAc,CAAC,GAAGI,SAAS;EAElD,CAAC;EAAA;IAAA;EAAA;AAAA,IAAC;AAEF,IAAME,GAAG,GAAGR,SAAS,CAACQ,GAAG;AACzBR,SAAS,CAACQ,GAAG;EAAA,8BAAG,WAAOC,GAAG,EAAEC,MAAM,EAAEC,WAAW,EAAK;IAC7C,IAAMC,QAAQ,SAASJ,GAAG,CAACC,GAAG,EAAEC,MAAM,EAAEC,WAAW,CAAC;IACpD,IAAGC,QAAQ,CAACC,EAAE,EAAE;MACTf,KAAK,CAACgB,KAAK,CAACL,GAAG,EAAEG,QAAQ,CAACG,IAAI,CAAC;MAC/B,OAAOH,QAAQ;IACtB;IACA,IAAMG,IAAI,SAASjB,KAAK,CAACU,GAAG,CAACC,GAAG,CAAC;IACjC,OAAOM,IAAI,GAAG;MAAEF,EAAE,EAAE,IAAI;MAAEE,IAAI,EAAJA;IAAK,CAAC,GAAGH,QAAQ;EAClD,CAAC;EAAA;IAAA;EAAA;AAAA;AAGD,eAAeZ,SAAS"},"metadata":{},"sourceType":"module"}